<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>demo</title>
	<script src="../Bufferloader.js"></script>
	<script type="text/javascript">
		// 浏览器要求必须要用户交互后才能播放音频
		const loadAndPlay = async () => {
			let context = new AudioContext();
			const bufferList = await BufferLoader(context, ['../test1.mp3', '../test2.mp3']);
			let source1 = context.createBufferSource();
			let source2 = context.createBufferSource(); 
			source1.buffer = bufferList[0];
			source2.buffer = bufferList[1];
			source1.connect(context.destination);
			source2.connect(context.destination);
			source1.start(0);
			source2.start(0);
		}
	</script>
</head>
<body>
	<div style="padding: 40px;">
		<ul>
			<li>注意：</li>
			<li>需要在服务器环境下测试</li>
			<li>可安装 https://www.npmjs.com/package/serve</li>
			<li>浏览器不允许主动播放音视频，需要用户交互后才可以</li>
		</ul>
	</div>
	<button onclick="loadAndPlay()">加载并播放</button>
</body>
</html>